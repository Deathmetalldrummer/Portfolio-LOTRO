$().ready(function(){function e(){for(var e=0,t=p,n=0;n<l;n++)e+=2*t.prev().height(),t=t.prev();e+=p.height(),$(".nav").css({height:e+"px",top:($(".nav").parent().height()-e)/2+"px"}),$(".nav__arrow").height((m-e)/2),i()}function i(){_=c.parent().height()/2-p.position().top-p.innerHeight()/2,s=p.index(),t()}function t(){c.stop(!0).animate({top:_+"px"},250),v()}function n(e){var i="nav__item_activePrev",t="nav__item_activeNext",n="nav__item_activePrev2",a="nav__item_activeNext2";$(e).index(),c.find(".nav__item");$(e).prev().addClass(i).siblings().removeClass(i),$(e).prev().prev().addClass(n).siblings().removeClass(n),$(e).next().addClass(t).siblings().removeClass(t),$(e).next().next().addClass(a).siblings().removeClass(a),$(e).addClass("nav__item_active").removeClass(t+" "+a+" "+n+" "+i).siblings().removeClass("nav__item_active")}function a(){var e=c.find(".nav__item_active").index();if(e<s)for(var i=0;i<s-e;i++){r=c.find(".nav__item");var t=r[r.length-1],n=+c.css("top").replace("px","")-$(t).innerHeight()+"px";$(t).prependTo(c),c.css({top:n})}if(e>s)for(var i=0;i<e-s;i++){r=c.find(".nav__item");var t=r[0],n=+c.css("top").replace("px","")+$(t).innerHeight()+"px";$(t).appendTo(c),c.css({top:n})}}function v(){var e=$(".nav__item_active .nav__link").attr("href");$(e).addClass("visible__article").siblings().removeClass("visible__article")}var _,s,r,o=$("body").outerHeight(!0),c=$(".nav__list"),p=c.find(".nav__item_active"),l=5,f=0,d=$(".aside"),m=d.innerHeight(),h=m/2,g=d.offset().top;!function(){var i=c.html().replace(/ nav__item_activeNext2/g,"").replace(/ nav__item_activePrev2/g,"").replace(/ nav__item_activeNext/g,"").replace(/ nav__item_activePrev/g,"").replace(/ nav__item_active/g,"");c.prepend(i);for(var t=Math.ceil(o/c.height()),n=0;n<t;n++)c.prepend(i),c.append(i);e()}(),function(){r=c.find(".nav__item"),c.draggable({axis:"y",scroll:!1,start:function(e,i){},drag:function(e,i){i.position.top-=.65*(i.position.top-i.originalPosition.top);for(var t=0;t<r.length;t++)$(r[t]).offset().top<=g+h&&$(r[t]).offset().top+$(r[t]).innerHeight()>=g+h&&($(r[t]).hasClass("nav__item_active")||n(r[t]))},stop:function(e,i){a(),t()}})}(),function(){c.find(".nav__link").on("click",function(e){if(e.preventDefault(),0===f)var i=$(this).closest(".nav__item").index()-s,v=setTimeout(function e(){i<0&&n(c.find(".nav__item_active").prev()),i>0&&n(c.find(".nav__item_active").next()),a(),t(),Math.abs(i)-1>f?(v=setTimeout(e,70),f++):(clearTimeout(v),f=0)},0)})}(),function(){$(".nav__arrow").on("click",function(){$(this).hasClass("nav__arrow_next")&&n(c.find(".nav__item_active").next()),$(this).hasClass("nav__arrow_prev")&&n(c.find(".nav__item_active").prev()),a(),t()})}()});